/* Multiselect Checkbox Grid Component Styles */
/* STORY-3: Reusable checkbox grid styling for consistent UX */

// ====================================
// Variables (using site-wide CSS custom properties)
// ====================================

// Colors (using site theme variables)
$primary-color: var(--primary-color);
$primary-hover: var(--primary-hover);
$border-color: var(--border-color);
$input-border: var(--input-border);
$focus-border: var(--focus-border);
$focus-shadow: var(--focus-shadow);
$bg-surface: var(--surface-bg);
$bg-card: var(--card-bg);
$bg-form: var(--form-bg);
$bg-disabled: var(--form-bg);
$text-primary: var(--text-primary);
$text-secondary: var(--text-secondary);
$text-light: var(--text-light);

// Spacing (maintaining consistent spacing scale)
$spacing-xs: 0.25rem;
$spacing-sm: 0.375rem;
$spacing-md: 0.5rem;
$spacing-lg: 0.75rem;
$spacing-xl: 1rem;

$border-radius-sm: 0.25rem;
$border-radius-md: 0.375rem;

$transition-duration: 0.2s;
$transition-easing: ease-in-out;

$checkbox-size-default: 1.25rem;
$checkbox-size-mobile: 1.125rem;

$font-size-default: 0.9375rem;
$font-size-mobile: 0.875rem;

// ====================================
// Fieldset
// ====================================

.multiselect-fieldset {
    border: none;
    padding: 0;
    margin: 0;
}

// ====================================
// Grid Layout
// ====================================

.multiselect-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: $spacing-xl;
    margin: $spacing-xl 0;

    // Responsive: Tablet (768px and up)
    @media (min-width: 768px) {
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    }

    // Responsive: Desktop (1024px and up)
    @media (min-width: 1024px) {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    }

    // Responsive: Mobile (up to 576px)
    @media (max-width: 575.98px) {
        grid-template-columns: 1fr;
    }
}

// ====================================
// Option Container
// ====================================

.multiselect-option {
    display: flex;
    align-items: center;
    border: 1px solid $input-border;
    border-radius: $border-radius-md;
    background-color: $bg-card;
    transition: background-color $transition-duration $transition-easing,
               border-color $transition-duration $transition-easing,
               box-shadow $transition-duration $transition-easing;

    &:hover {
        border-color: $primary-color;
        background-color: $bg-surface;
    }

    &:focus-within {
        outline: 2px solid $focus-border;
        outline-offset: 2px;
    }

    // Style when checkbox is checked
    &:has(.multiselect-input:checked) {
        background-color: var(--option-pill-active-bg);
        border-color: var(--primary-color);

        .multiselect-pill {
            color: var(--text-light);
        }
    }

    // High contrast mode
    @media (prefers-contrast: more) {
        border-width: 2px;
    }

    // Print styles
    @media print {
        page-break-inside: avoid;
        margin-bottom: $spacing-md;
    }
}

// ====================================
// Checkbox Input
// ====================================

.multiselect-input {
    appearance: none;
    -webkit-appearance: none;
    position: absolute;
    opacity: 0;
    width: $checkbox-size-default;
    height: $checkbox-size-default;
    margin: 0;
    margin-right: $spacing-lg;
    cursor: pointer;
    border: 1px solid $input-border;
    border-radius: $border-radius-sm;
    background-color: $bg-card;
    transition: background-color $transition-duration $transition-easing,
               border-color $transition-duration $transition-easing,
               box-shadow $transition-duration $transition-easing;
    flex-shrink: 0;

    &:checked {
        background-color: $primary-color;
        border-color: $primary-color;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3l6-6'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: center;
        background-size: 100%;
    }

    &:focus {
        outline: 0;
        border-color: $focus-border;
        box-shadow: $focus-shadow;
    }

    &:focus-visible {
        outline: 2px solid $focus-border;
        outline-offset: 2px;
    }

    &:disabled {
        background-color: $bg-disabled;
        border-color: $input-border;
        cursor: not-allowed;
        opacity: 0.65;
    }

    // Mobile adjustments
    @media (max-width: 575.98px) {
        width: $checkbox-size-mobile;
        height: $checkbox-size-mobile;
        margin-right: 0.625rem;
    }

    // High contrast mode
    @media (prefers-contrast: more) {
        border-width: 2px;
    }

    // Print styles
    @media print {
        margin-right: $spacing-md;
    }
}

// ====================================
// Label
// ====================================

.multiselect-label {
    display: flex;
    align-items: center;
    cursor: pointer;
    margin: 0;
    flex-grow: 1;
    min-width: 0;
    padding: $spacing-lg;

    // Mobile adjustments
    @media (max-width: 575.98px) {
        padding: 0.625rem;
    }
}

// ====================================
// Pill Badge
// ====================================

.multiselect-pill {
    display: inline-block;
    padding: $spacing-sm $spacing-lg;
    border-radius: $border-radius-sm;
    font-size: $font-size-default;
    font-weight: 500;
    word-break: break-word;
    overflow-wrap: break-word;
    line-height: 1.4;
    color: var(--option-pill-color);

    // Mobile adjustments
    @media (max-width: 575.98px) {
        font-size: $font-size-mobile;
        padding: 0.3125rem 0.625rem;
    }

    // High contrast mode
    @media (prefers-contrast: more) {
        font-weight: 600;
    }
}

// ====================================
// Print Styles
// ====================================

@media print {
    .multiselect-grid {
        display: block;
        page-break-inside: avoid;
    }
}
